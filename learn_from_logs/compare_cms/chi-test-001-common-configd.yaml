apiVersion: v1
data:
  01-clickhouse-01-listen.xml: |
    <!-- IMPORTANT -->
    <!-- This file is auto-generated -->
    <!-- Do not edit this file - all changes would be lost -->
    <!-- Edit appropriate template in the following folder: -->
    <!-- deploy/builder/templates-config -->
    <!-- IMPORTANT -->
    <yandex>
        <!-- Listen wildcard address to allow accepting connections from other containers and host network. -->
        <listen_host>::</listen_host>
        <listen_host>0.0.0.0</listen_host>
        <listen_try>1</listen_try>
        <background_buffer_flush_schedule_pool_size>16</background_buffer_flush_schedule_pool_size>
        <background_pool_size>16</background_pool_size>
        <background_schedule_pool_size>128</background_schedule_pool_size>
    </yandex>
  01-clickhouse-02-logger.xml: |
    <!-- IMPORTANT -->
    <!-- This file is auto-generated -->
    <!-- Do not edit this file - all changes would be lost -->
    <!-- Edit appropriate template in the following folder: -->
    <!-- deploy/builder/templates-config -->
    <!-- IMPORTANT -->
    <yandex>
        <logger>
            <!-- Possible levels: https://github.com/pocoproject/poco/blob/devel/Foundation/include/Poco/Logger.h#L439 -->
            <level>debug</level>
            <log>/var/log/clickhouse-server/clickhouse-server.log</log>
            <errorlog>/var/log/clickhouse-server/clickhouse-server.err.log</errorlog>
            <size>1000M</size>
            <count>10</count>
            <!-- Default behavior is autodetection (log to console if not daemon mode and is tty) -->
            <console>1</console>
        </logger>
    </yandex>
  01-clickhouse-03-query_log.xml: |
    <!-- IMPORTANT -->
    <!-- This file is auto-generated -->
    <!-- Do not edit this file - all changes would be lost -->
    <!-- Edit appropriate template in the following folder: -->
    <!-- deploy/builder/templates-config -->
    <!-- IMPORTANT -->
    <yandex>
        <query_log replace="1">
            <database>system</database>
            <table>query_log</table>
            <engine>Engine = MergeTree PARTITION BY event_date ORDER BY event_time TTL event_date + interval 30 day</engine>
            <flush_interval_milliseconds>7500</flush_interval_milliseconds>
        </query_log>
        <query_thread_log remove="1"/>
    </yandex>
  01-clickhouse-04-part_log.xml: |
    <!-- IMPORTANT -->
    <!-- This file is auto-generated -->
    <!-- Do not edit this file - all changes would be lost -->
    <!-- Edit appropriate template in the following folder: -->
    <!-- deploy/builder/templates-config -->
    <!-- IMPORTANT -->
    <yandex>
        <part_log replace="1">
            <database>system</database>
            <table>part_log</table>
            <engine>Engine = MergeTree PARTITION BY event_date ORDER BY event_time TTL event_date + interval 30 day</engine>
            <flush_interval_milliseconds>7500</flush_interval_milliseconds>
        </part_log>
    </yandex>
  01-clickhouse-05-trace_log.xml: |
    <!-- IMPORTANT -->
    <!-- This file is auto-generated -->
    <!-- Do not edit this file - all changes would be lost -->
    <!-- Edit appropriate template in the following folder: -->
    <!-- deploy/builder/templates-config -->
    <!-- IMPORTANT -->
    <yandex>
        <trace_log replace="1">
            <database>system</database>
            <table>trace_log</table>
            <engine>Engine = MergeTree PARTITION BY event_date ORDER BY event_time TTL event_date + interval 30 day</engine>
            <flush_interval_milliseconds>7500</flush_interval_milliseconds>
        </trace_log>
    </yandex>
  chop-generated-remote_servers.xml: |
    <yandex>
        <remote_servers>
            <!-- User-specified clusters -->
            <single>
                <shard>
                    <internal_replication>False</internal_replication>
                    <replica>
                        <host>chi-test-001-single-0-0</host>
                        <port>9000</port>
                        <secure>0</secure>
                    </replica>
                </shard>
            </single>
            <!-- Autogenerated clusters -->
            <all-replicated>
                <shard>
                    <internal_replication>true</internal_replication>
                    <replica>
                        <host>chi-test-001-single-0-0</host>
                        <port>9000</port>
                        <secure>0</secure>
                    </replica>
                </shard>
            </all-replicated>
            <all-sharded>
                <shard>
                    <internal_replication>false</internal_replication>
                    <replica>
                        <host>chi-test-001-single-0-0</host>
                        <port>9000</port>
                        <secure>0</secure>
                    </replica>
                </shard>
            </all-sharded>
        </remote_servers>
    </yandex>
kind: ConfigMap
metadata:
  creationTimestamp: "2024-06-13T11:01:19Z"
  labels:
    clickhouse.altinity.com/ConfigMap: ChiCommon
    clickhouse.altinity.com/app: chop
    clickhouse.altinity.com/chi: test-001
    clickhouse.altinity.com/namespace: test
    clickhouse.altinity.com/object-version: 6118d499c34fe1b5c94c7832eaa3b15103513746
  name: chi-test-001-common-configd
  namespace: test
  ownerReferences:
  - apiVersion: clickhouse.altinity.com/v1
    blockOwnerDeletion: true
    controller: true
    kind: ClickHouseInstallation
    name: test-001
    uid: 3fa61872-94fe-4234-91af-2b6b769a7ebb
  resourceVersion: "1482"
  uid: 23a193e4-9950-4867-9bf9-b59f5b535ec2
